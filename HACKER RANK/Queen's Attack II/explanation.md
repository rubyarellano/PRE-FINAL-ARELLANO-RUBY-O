This function calculates how many squares a queen can attack on an n × n chessboard, considering obstacles. It checks all eight possible directions (vertical, horizontal, and diagonal) from the queen’s position. For each direction, it moves step by step until it hits the board edge or an obstacle, counting all reachable squares. The total number of attackable squares is then returned.